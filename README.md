# hw05_final - доработанный и завершенный проект hw04_tests. 

Проект представляет собой социальную сеть для публикации личных дневников. После регистрации пользователь получает свой профайл. После публикации каждая запись доступна на странице автора. Пользователи могут заходить на чужие страницы, подписываться на авторов и комментировать их записи. Автор может выбрать для своей страницы имя и уникальный адрес. Есть возможность модерировать записи и блокировать пользователей, если начнут присылать спам. Записи можно отправить в сообщество и посмотреть там записи разных авторов. 

Стек: Python3, Django 2.2, pytest, unitest, SQlite3, Pillow, sorl-thumbnail

Доработки по сравнению с проектом hw04_tests:
1. Добавлена модель Follow, она имеет следующие поля:
  - user — ссылка на объект пользователя, который подписывается. Имя связи: related_name="follower",
  - author — ссылка на объект пользователя, на которого подписываются, имя связи - related_name="following".
2. Добалены следующие view-функции для системы подписок:
  - view-функция страницы, куда будут выведены посты авторов, на которых подписан текущий пользователь(follow_index).
  - view-функция для подписки на интересного автора(profile_follow).
  - view-функция для отписаться от автора(profile_unfollow).
3. Добавьте необходимые для подписок адреса в posts/urls.py, а также создан необходимый шалон, куда выводятся посты авторов, на которых подписан пользователь(follow.html)
4. Добавлена модель Comment, она имеет следующие поля(В случае, если автор комментария или пост будут удалены — все привязанные к ним комментарии автоматически удалятся.):
  - post — ссылка на пост, к которому оставлен комментарий (для связи модели Post с комментариями используйте имя comments ).
  - author — ссылка на автора комментария (для связи модели User с комментариями используйте имя comments).
  - text — текст комментария.
  - created — автоматически подставляемые дата и время публикации комментария.
5. Для модели Comments создан шаблон comments.html, и подключен к странице просмотра записи.
6. Также для модели Сomments создан роутинг, и написана view-функция.
7. Добавлены шаблоны страниц ошибок 404, 500, а также добавлены в роутинг.
8. Добавлена возможность прикреплять к посту картинки с помощью библиотек Pillow и sorl-thumbnail.
9. Написаны тесты, проверяющие работу нового сервиса:
  - Авторизованный пользователь может подписываться на других пользователей и удалять их из подписок.
  - Новая запись пользователя появляется в ленте тех, кто на него подписан и не появляется в ленте тех, кто не подписан на него.
  - Только авторизированный пользователь может комментировать посты.
10. Добалено кэширование главной страницы в течении 20 секунд.
11. С помощью sorl-thumbnail выведены иллюстрации к постам:
  - в шаблон главной страницы,
  - в шаблон профайла автора,
  - в шаблон страницы группы.
12. Написаны тесты, которые проверяют:
  - что при выводе поста с картинкой изображение передаётся в словаре context
    - на главную страницу,
    - на страницу профайла,
    - на страницу группы,
    - на отдельную страницу поста;
  - что при отправке поста с картинкой через форму PostForm создаётся запись в базе данных;
  - что если страница не найдена, то сервер возвращает код 404.
13. Написан тест для проверки кеширования главной страницы. Логика теста: при удалении записи из базы она остаётся в response.content главной страницы до тех пор, пока кеш не будет очищен принудительно.
